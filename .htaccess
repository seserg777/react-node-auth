# Redirect all requests to the React app build directory
RewriteEngine On

# If the request is for a file or directory that exists in build/, serve it
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteCond %{REQUEST_URI} !^/apps/frontend/build/
RewriteRule ^(.*)$ /apps/frontend/build/$1 [L]

# If the request is for the root directory, serve index.html from build
RewriteRule ^$ /apps/frontend/build/index.html [L]

# Serve static files from build directory
RewriteCond %{REQUEST_URI} ^/static/
RewriteRule ^(.*)$ /apps/frontend/build/$1 [L]

# Handle React Router (SPA routing)
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteCond %{REQUEST_URI} !^/apps/frontend/build/
RewriteRule ^.*$ /apps/frontend/build/index.html [L]
